<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8">
    <title>speed_shop</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="speed_shop" name="keywords">
    <meta content="speed_shop" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">  

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid" style="direction: ltr;">
        <div class="row bg-secondary py-1 px-xl-5">
            <div class="col-lg-6 d-none d-lg-block">
                
            </div>
            <div class="col-lg-6 text-center text-lg-right">
                <div class="d-inline-flex align-items-center">
                    <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">My Account</button>
                        <div class="dropdown-menu dropdown-menu-right">
                            <button class="dropdown-item" type="button">Sign in</button>
                            <button class="dropdown-item" type="button">Sign up</button>
                        </div>
                    </div>
                    <div class="btn-group mx-2">
                        <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">العملة</button>
                        <div class="dropdown-menu dropdown-menu-right">
                            <button class="dropdown-item" type="button">الدينار اليبي</button>
                            <button class="dropdown-item" type="button">الدولار الامريكي</button>
                          
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">اللغة</button>
                        <div class="dropdown-menu dropdown-menu-right">
                            <button class="dropdown-item" type="button">العربية</button>
                            <button class="dropdown-item" type="button">الانجليزيه</button>
                           
                        </div>
                    </div>
                </div>
                <div class="d-inline-flex align-items-center d-block d-lg-none">
                    <a href="" class="btn px-0 ml-2">
                        <i class="fas fa-phone-volume text-dark"></i>
                        <span class="badge text-dark border border-dark rounded-circle" style="padding-bottom: 2px;"></span>
                    </a>
                    <a href="" class="btn px-0 ml-2">
                        <i class="fas fa-shopping-cart text-dark"></i>
                        <span class="badge text-dark border border-dark rounded-circle" style="padding-bottom: 2px;"></span>
                    </a>
                </div>
            </div>
        </div>
        <div class="row align-items-center bg-light py-3 px-xl-5 d-none d-lg-flex">
            <div class="col-lg-4">
                <a href="" class="text-decoration-none">
                    <span class="h1 text-uppercase text-primary bg-dark px-2">Speed</span>
                    <span class="h1 text-uppercase text-dark bg-primary px-2 ml-n1">Shop</span>
                </a>
            </div>
            <div class="col-lg-4 col-6 text-left">
               
            </div>
            <div class="col-lg-4 col-6 text-right">
                <p class="m-0">خدمة العملاء</p>
                <h5 class="m-0">+218 92-0000000</h5>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <div class="container-fluid bg-dark mb-30">
        <div class="row px-xl-5">
            <div class="col-lg-3 d-none d-lg-block">
                
            </div>
            <div class="col-lg-9">
                <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 py-lg-0 px-0">
                    <a href="" class="text-decoration-none d-block d-lg-none">
                        <span class="h1 text-uppercase text-dark bg-light px-2">متجر</span>
                        <span class="h1 text-uppercase text-light bg-primary px-2 ml-n1">متعدد</span>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav ml-auto py-0">
                            <a href="index.html" class="nav-item nav-link">الرئيسية</a>
                            <a href="shop.html" class="nav-item nav-link">المتجر</a>
                            <a href="detail.html" class="nav-item nav-link">تفاصيل المنتج</a>
                            <a href="cart.html" class="nav-item nav-link active">عربة التسوق</a>
                            <a href="checkout.html" class="nav-item nav-link">الدفع</a>
                            <a href="contact.html" class="nav-item nav-link">تواصل معنا</a>
                        </div>

                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- Navbar End -->

    <!-- Breadcrumb Start -->
    <div class="container-fluid">
        <div class="row px-xl-5">
            <div class="col-12">
                <nav class="breadcrumb bg-light mb-30">
                    <a class="breadcrumb-item text-dark" href="#">عربة التسوق</a>
                    <a class="breadcrumb-item text-dark" href="#">تسوق</a>
                    <span class="breadcrumb-item active">الرئيسية</span>
                </nav>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->


    <!-- Cart Start -->


<!-- Cart Start -->
<div class="container-fluid">
    <div class="row px-xl-5">
        <div class="col-lg-8 table-responsive mb-5">
            <table class="table table-light table-borderless table-hover text-center mb-0">
                <thead class="thead-dark">
                    <tr>
                        <th>الاصناف</th>
                        <th>السعر</th>
                        <th>الكمية</th>
                        <th>المجموع</th>
                        <th>حذف</th>
                    </tr>
                </thead>
                <tbody id="cart-items" class="align-middle">
                    <!-- المنتجات ستظهر هنا باستخدام JavaScript -->
                </tbody>
            </table>
        </div>
        <div class="col-lg-4">
            <div class="cart-summary bg-light p-30">
                <h5>ملخص السلة</h5>
                <ul class="list-unstyled mb-4">
                    <li><span class="text-muted">المجموع:</span><span id="total-price">0</span> د.ل</li>
                </ul>
                <a  href="checkout.html"   >
                <button class="btn btn-primary btn-block py-3"          >الدفع</button>   </a> 
            </div>
        </div>
    </div>
</div>
<!-- Cart End -->









    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script>
        const coupons = {
        "DISCOUNT10": 10, // 10% discount
        "FLAT50": 50,    // Flat 50 discount
        "SALE20": 20     // 20% discount
    };
        const couponInput = document.getElementById('code');
        const applyCouponButton = document.getElementById('applyCoupon');
        const couponMessage = document.getElementById('couponMessage');
        const table = document.querySelector('table');
        const subtotalElement = document.getElementById('subtotal');
        const shippingElement = document.getElementById('shipping');
        const totalElement = document.getElementById('total');
        const cupon = document.getElementById('code');
    
        const shippingCost = 210; // Static shipping cost
    
        // Function to calculate and update the invoice totals
        function updateInvoice() {
            let subtotal = 0;
    
            // Loop through all rows to calculate the subtotal
            const rows = table.querySelectorAll('tbody tr');
            rows.forEach(row => {
                const totalCell = row.querySelector('td:nth-child(4)');
                if (totalCell) {
                    subtotal += parseFloat(totalCell.textContent) || 0;
                }
            });
    
            // Update subtotal, shipping, and total
            subtotalElement.textContent = subtotal.toFixed(2);
            totalElement.textContent = (subtotal + shippingCost).toFixed(2);
        }
        function applyCoupon() {
        const couponCode = couponInput.value.trim().toUpperCase(); // Convert to uppercase for uniformity
        let subtotal = parseFloat(subtotalElement.textContent) || 0;

        // Check if coupon is valid
        if (coupons[couponCode]) {
            const discountValue = coupons[couponCode];
            let discount;

            if (discountValue < 100) {
                // Percentage discount
                discount = (subtotal * discountValue) / 100;
            } else {
                // Flat discount
                discount = discountValue;
            }

            // Ensure discount does not exceed subtotal
            discount = Math.min(discount, subtotal);

            // Calculate new totals
            const newSubtotal = subtotal - discount;
            const total = newSubtotal + shippingCost;

            // Update totals
            subtotalElement.textContent = newSubtotal.toFixed(2);
            totalElement.textContent = total.toFixed(2);

            // Display success message
            couponMessage.textContent = `تم تطبيق الكوبون! خصم بقيمة ${discount.toFixed(2)}.`;
            couponMessage.classList.remove('text-danger');
            couponMessage.classList.add('text-success');
            couponMessage.style.display = 'block';
        } else {
            // Invalid coupon message
            couponMessage.textContent = 'الكوبون غير صالح. حاول مرة أخرى.';
            couponMessage.classList.remove('text-success');
            couponMessage.classList.add('text-danger');
            couponMessage.style.display = 'block';
        }
    }
    
        // Event listener for table buttons
        table.addEventListener('click', (event) => {
            const target = event.target;
            const row = target.closest('tr');
            if (!row) return;
    
            const quantityInput = row.querySelector('.form-control');
            const unitPriceCell = row.querySelector('td:nth-child(2)');
            const totalCell = row.querySelector('td:nth-child(4)');
    
            if (!quantityInput || !unitPriceCell || !totalCell) return;
    
            const unitPrice = parseFloat(unitPriceCell.textContent) || 0;
    
            if (target.closest('.btn-minus')) {
                let currentValue = parseInt(quantityInput.value) || 1;
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                }
            } else if (target.closest('.btn-plus')) {
                let currentValue = parseInt(quantityInput.value) || 1;
                quantityInput.value = currentValue + 1;
            }
    
            // Update row total
            const newQuantity = parseInt(quantityInput.value) || 1;
            totalCell.textContent = (unitPrice * newQuantity).toFixed(2);
    
            // Update the invoice totals
            updateInvoice();
        });
        applyCouponButton.addEventListener('click', (event) => {
        event.preventDefault();
        applyCoupon();
    });
    
        // Initial calculation on page load
        document.addEventListener('DOMContentLoaded', updateInvoice);
    </script>
    
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>
        
        
    <script>
        // Load cart from localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        
        // Function to update the cart view in the page
        function updateCartView() {
            const cartItemsContainer = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');
            
            // Clear existing cart items
            cartItemsContainer.innerHTML = '';
            
            // Initialize total price
            let totalPrice = 0;
        
            cart.forEach(item => {
                // Create table row for each product in the cart
                const row = document.createElement('tr');
                
                // Create table data for each column in the row
                row.innerHTML = `
                    <td class="align-middle"><img src="img" alt="" style="width: 50px;"> ${item.name}</td>
                    <td class="align-middle">${item.price} د.ل</td>
                    <td class="align-middle">
                        <div class="input-group quantity mx-auto" style="width: 100px;">
                            <div class="input-group-btn">
                                <button class="btn btn-sm btn-primary btn-minus" onclick="updateQuantity('${item.id}', 'decrease')">
                                    <i class="fa fa-minus"></i>
                                </button>
                            </div>
                            <input type="text" class="form-control form-control-sm bg-secondary border-0 text-center" value="${item.quantity}" readonly>
                            <div class="input-group-btn">
                                <button class="btn btn-sm btn-primary btn-plus" onclick="updateQuantity('${item.id}', 'increase')">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </td>
                    <td class="align-middle">${item.quantity * item.price} د.ل</td>
                    <td class="align-middle">
                        <button class="btn btn-sm btn-danger" onclick="removeItem('${item.id}')">
                            <i class="fa fa-times"></i>
                        </button>
                    </td>
                `;
                
                // Add row to cart items container
                cartItemsContainer.appendChild(row);
                
                // Update total price
                totalPrice += item.quantity * item.price;
            });
        
            // Update total price in the summary
            totalPriceElement.textContent = totalPrice;
        }
        
        // Function to update quantity in the cart (increase or decrease)
        function updateQuantity(productId, action) {
            const product = cart.find(item => item.id === productId);
        
            if (product) {
                if (action === 'increase') {
                    product.quantity++;
                } else if (action === 'decrease' && product.quantity > 1) {
                    product.quantity--;
                }
                
                // Update cart in localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update the cart view
                updateCartView();
            }
        }
        
        // Function to remove an item from the cart
        function removeItem(productId) {
            // Remove item from the cart array
            cart = cart.filter(item => item.id !== productId);
        
            // Update cart in localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
        
            // Update the cart view
            updateCartView();
        }
        
        // Initial call to update cart view when page loads
        updateCartView();


       

        </script>
        
        



























































    <!-- Template Javascript -->
    <script src="js/main.js"></script>
</body>

</html>